!function(window,document,$,undefined){"use strict";if(window.bcx){if(window.BCHighlightMe&&window.BCHighlightMe.highlightMe)return void window.BCHighlightMe.highlightMe();var app={me:window.bcx.people.models[0],initDone:!1};app.highlightMe=function(){if(app.me.get("name")||app.me.get("email_address")){var $me=app.getMe();if(!$me.length)return app.init("Hey, looks like you're task-free!");$me.parents(".wrapper").addClass("BC-highlight-me"),app.triggerEvent($me),app.init("Found "+$me.length+" tasks for you.")}},app.init=function(alertMsg){app.initDone||(alert(alertMsg),$("body").on("click","a",app.clickLink),app.addStyles(),app.initDone=!0)},app.addStyles=function(){var css="";css+='<style type="text/css" media="screen">',css+=".BC-highlight-me {",css+="background: #FFFF5C;",css+="border-radius: 15px;",css+="padding: 5px 8px 5px 30px !important;",css+="margin-left: -29px !important;",css+="}",css+="</style>",$("head").append(css)},app.getMe=function(){var selector=function(search){return $("span[data-behavior=todo_assignee_present]:contains("+search+")")},$me=selector(app.me.get("name"));return $me.length||($me=selector(app.me.get("email_address"))),$me},app.clickLink=function(){setTimeout(function(){app.highlightMe()},1e3)},app.triggerEvent=function($me){if($me.length){var ids=$me.parents(".todolist").map(function(){return this.id}).get();$("body").trigger("basecamp_tasks_highlighted",{type:"me",ids:ids})}},app.highlightMe(),window.BCHighlightMe=window.BCHighlightMe||app}}(window,document,jQuery),function(window,document,$,undefined){"use strict";if(window.bcx){if(window.BCHighlightUser&&window.BCHighlightUser.init)return void window.BCHighlightUser.init();var app={search_name:"",initDone:!1};$.expr[":"].Contains=function(a,i,m){return $(a).text().toUpperCase().indexOf(m[3].toUpperCase())>=0},app.init=function(){app.search_name=prompt("Search Name:");var $search=app.highlightUser(),number=!1!==$search&&$search.length?$search.length:"No";alert(number+" tasks found for "+app.search_name+"."),app.triggerEvent($search),app.initDone||($("body").on("click","a",app.clickLink),app.addStyles()),app.initDone=!0},app.addStyles=function(){var css="";css+='<style type="text/css" media="screen">',css+=".BC-user-highlight {",css+="background: #A4FF5C;",css+="border-radius: 15px;",css+="padding: 5px 8px 5px 30px !important;",css+="margin-left: -29px !important;",css+="}",css+="</style>",$("head").append(css)},app.highlightUser=function(){if(app.search_name){var $search=$("span[data-behavior=todo_assignee_present]:Contains("+app.search_name+")");return $search.length?($(".BC-user-highlight").removeClass("BC-user-highlight"),$search.parents(".wrapper").addClass("BC-user-highlight")):!1}},app.clickLink=function(){setTimeout(function(){app.highlightUser()},1e3)},app.triggerEvent=function($search){if($search.length){var ids=$search.parents(".todolist").map(function(){return this.id}).get();$("body").trigger("basecamp_tasks_highlighted",{type:"user",search:app.search_name,ids:ids})}},app.init(),window.BCHighlightUser=window.BCHighlightUser||app}}(window,document,jQuery),function(window,document,$,undefined){"use strict";if(window.BCMinifier&&window.BCMinifier.init)return void window.BCMinifier.addAllButtons();var app={upArrow:"&ShortUpArrow;",dwnArrow:"&ShortDownArrow;",autoHide:!1};app.init=function(){$("body").on("click",".minifier.minify-all",app.toggleAllLists),$("body").on("click",".minifier.minify-lists",app.toggleList),$("body").on("click","a",app.clickLink),$("body").on("basecamp_tasks_highlighted",app.maybeShowOnHighlight),app.addStyles(),app.addAllButtons()},app.addStyles=function(){var css="";css+='<style type="text/css" media="screen">',css+=".minifier.minify-lists, .minify-all-icon {",css+="top: .05em;",css+="cursor: pointer;",css+="background: #e2e9f8;",css+="padding: 1px 6px;",css+="border-radius: 100%;",css+="color: #1c5c76;",css+="font-size: 1.5em;",css+="display: inline-block;",css+="margin-left: 6px;",css+="position: relative;",css+="}",css+=".minifier.minify-lists {",css+="position: absolute;",css+="right: 0;",css+="top: .4em;",css+="}",css+=".minifier.minify-all {",css+="display: inline-block;",css+="margin-left: 10px;",css+="cursor: pointer;",css+="}",css+="</style>",$("head").append(css)},app.addAllButtons=function(){app.addAllButton(),$('.todolists li[data-sortable-type="todolist"]').each(app.addButtons),app.autoHide&&setTimeout(function(){$(".minifier.minify-all").trigger("click")},100)},app.addAllButton=function(){if(!$('[data-behavior="new_todolist"]').next(".minifier").length){var html='<div class="minifier minify-all" title="Minify All"><span class="minify-all-text">Minify All</span><span class="minify-all-icon">'+app.upArrow+"</span></div>";$('[data-behavior="new_todolist"]').after(html)}},app.addButtons=function(){var $this=$(this),id=$this.attr("id");if(id&&undefined!==typeof id&&!($this.find(".minifier").length>0)){var html='<div class="minifier minify-lists" title="Minify List" data-selector="'+id+'">'+app.upArrow+"</div>";$this.css({position:"relative"}).append(html)}},app.toggleList=function(evt,state){function open(){$items.show(),$button.data("hidden",!1).html(app.upArrow).attr("title","Minify List")}function close(){$items.hide(),$button.data("hidden",!0).html(app.dwnArrow).attr("title","Expand List")}var $button=evt instanceof jQuery?evt:$(this),$items=$(document.getElementById($button.data("selector"))).find(".todolist .todos");return"close"===state?close():$button.data("hidden")||"open"===state?open():void close()},app.toggleAllLists=function(){var $all_button=$(this),closeIt=!$all_button.data("hidden");$(".minifier.minify-lists").each(function(){app.toggleList($(this),closeIt?"close":"open")});var html=closeIt?app.dwnArrow:app.upArrow,title=closeIt?"Expand All":"Minify All";$all_button.data("hidden",closeIt).attr("title",title),$all_button.find(".minify-all-text").html(title),$all_button.find(".minify-all-icon").html(html)},app.clickLink=function(){setTimeout(function(){$(".minifier").length||(app.addAllButtons(),setTimeout(app.clickLink,200))},1e3)},app.maybeShowOnHighlight=function(evt,data){var index,ids=data.ids;for(index=ids.length-1;index>=0;index--){var $button=$('[data-selector="sortable_'+ids[index]+'"]');$button.length&&$button.data("hidden")&&$button.trigger("click")}},app.init(),window.BCMinifier=window.BCMinifier||app}(window,document,jQuery);